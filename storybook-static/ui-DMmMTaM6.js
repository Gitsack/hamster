import{j as s}from"./jsx-runtime-u17CrQMm.js";import{f as T,H as U,e as o,t as r}from"./app-CFoDCqX-.js";import{A as k}from"./app-layout-CTvh2ZE0.js";import{B as P}from"./button-B9kPMW4q.js";import{I as i}from"./input-Bw95PIWX.js";import{C as g,a as y,b as v,c as N,d as C}from"./card-BT9UEfea.js";import{B}from"./badge-B6bn15vN.js";import{S}from"./spinner-McTJFRVv.js";import{r as a}from"./app-BHuVDAkc.js";import"./preload-helper-PPVm8Dsz.js";import"./client-Bx265bNG.js";import"./index-CYxWbFTv.js";import"./index-D5-0xbEa.js";import"./utils-CDN07tui.js";import"./dialog-CQTA4pg1.js";import"./createLucideIcon-GXN1tXoc.js";import"./skeleton-A7behTLO.js";import"./index.min-fvaCWwiU.js";import"./media-status-badge-DETbNkVM.js";import"./useRenderElement-D0Q1kVud.js";import"./useBaseUiId-BvJSLVy2.js";import"./useValueAsRef-GoV-SdOe.js";import"./media-teaser-CTZEtwns.js";import"./check-BEKQ83Eb.js";import"./useLabelableId-CyGgmgle.js";import"./valueToPercent-CmxdyyhM.js";import"./slot-CUYGZ4Fv.js";import"./hamster-icon-DOXrnfMg.js";function H(){const{props:F}=T(),{user:n,version:b}=F,[c,A]=a.useState(n?.fullName||""),[m,p]=a.useState(!1),[l,h]=a.useState(""),[t,u]=a.useState(""),[f,w]=a.useState(""),[x,j]=a.useState(!1),E=async()=>{p(!0);try{const e=await fetch("/api/v1/user/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullName:c})});if(e.ok)r.success("Profile updated");else{const d=await e.json();r.error(d.error||"Failed to update profile")}}catch{r.error("Failed to update profile")}finally{p(!1)}},I=async()=>{if(!l||!t){r.error("Please fill in all password fields");return}if(t!==f){r.error("New passwords do not match");return}if(t.length<8){r.error("Password must be at least 8 characters");return}j(!0);try{const e=await fetch("/api/v1/user/password",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPassword:l,newPassword:t})});if(e.ok)r.success("Password changed"),h(""),u(""),w("");else{const d=await e.json();r.error(d.error||"Failed to change password")}}catch{r.error("Failed to change password")}finally{j(!1)}};return s.jsxs(k,{title:"Profile Settings",children:[s.jsx(U,{title:"Profile Settings"}),s.jsxs("div",{className:"space-y-6 max-w-2xl",children:[s.jsxs(g,{children:[s.jsxs(y,{children:[s.jsx(v,{children:"Account"}),s.jsx(N,{children:"Your account information and display name."})]}),s.jsxs(C,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(o,{htmlFor:"email",children:"Email"}),s.jsx(i,{id:"email",value:n?.email||"",disabled:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(o,{htmlFor:"fullName",children:"Display Name"}),s.jsx(i,{id:"fullName",value:c,onChange:e=>A(e.target.value),placeholder:"Your name"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[n?.isAdmin&&s.jsx(B,{className:"bg-primary",children:"Admin"}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:["Hamster v",b]})]}),s.jsxs(P,{onClick:E,disabled:m,children:[m&&s.jsx(S,{className:"mr-2"}),"Save Profile"]})]})]}),s.jsxs(g,{children:[s.jsxs(y,{children:[s.jsx(v,{children:"Change Password"}),s.jsx(N,{children:"Update your account password."})]}),s.jsxs(C,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(o,{htmlFor:"currentPassword",children:"Current Password"}),s.jsx(i,{id:"currentPassword",type:"password",value:l,onChange:e=>h(e.target.value),placeholder:"Enter current password"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(o,{htmlFor:"newPassword",children:"New Password"}),s.jsx(i,{id:"newPassword",type:"password",value:t,onChange:e=>u(e.target.value),placeholder:"Enter new password"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(o,{htmlFor:"confirmPassword",children:"Confirm New Password"}),s.jsx(i,{id:"confirmPassword",type:"password",value:f,onChange:e=>w(e.target.value),placeholder:"Confirm new password"})]}),s.jsxs(P,{onClick:I,disabled:x,children:[x&&s.jsx(S,{className:"mr-2"}),"Change Password"]})]})]})]})]})}H.__docgenInfo={description:"",methods:[],displayName:"UISettings"};export{H as default};
