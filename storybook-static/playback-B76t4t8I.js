import{j as e}from"./jsx-runtime-u17CrQMm.js";import{H as m,e as p,S as j,a as b,b as v,c as w,d as s,t as r}from"./app-CFoDCqX-.js";import{r as o}from"./app-BHuVDAkc.js";import{A as u}from"./app-layout-CTvh2ZE0.js";import{C as S,a as A,b as N,c as k,d as C}from"./card-BT9UEfea.js";import{S as T}from"./switch-FMiJ_scT.js";import{B as h}from"./badge-B6bn15vN.js";import"./preload-helper-PPVm8Dsz.js";import"./client-Bx265bNG.js";import"./index-CYxWbFTv.js";import"./index-D5-0xbEa.js";import"./utils-CDN07tui.js";import"./dialog-CQTA4pg1.js";import"./createLucideIcon-GXN1tXoc.js";import"./button-B9kPMW4q.js";import"./slot-CUYGZ4Fv.js";import"./skeleton-A7behTLO.js";import"./spinner-McTJFRVv.js";import"./index.min-fvaCWwiU.js";import"./media-status-badge-DETbNkVM.js";import"./useRenderElement-D0Q1kVud.js";import"./useBaseUiId-BvJSLVy2.js";import"./useValueAsRef-GoV-SdOe.js";import"./media-teaser-CTZEtwns.js";import"./check-BEKQ83Eb.js";import"./useLabelableId-CyGgmgle.js";import"./valueToPercent-CmxdyyhM.js";import"./hamster-icon-DOXrnfMg.js";import"./input-Bw95PIWX.js";const P={auto:"Auto-detect",videotoolbox:"VideoToolbox (macOS)",cuda:"CUDA (NVIDIA)",qsv:"Quick Sync (Intel)",vaapi:"VAAPI (Linux)",none:"Disabled"};function H(){const[t,n]=o.useState(null),[x,g]=o.useState(!0),[c,l]=o.useState(!1),f=async()=>{try{const a=await fetch("/api/v1/settings/playback");if(a.ok){const i=await a.json();n(i)}}catch{r.error("Failed to load playback settings")}finally{g(!1)}};o.useEffect(()=>{f()},[]);const d=async a=>{if(t){l(!0);try{const i=await fetch("/api/v1/settings/playback",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({transcoding:{...t.transcoding,...a}})});if(i.ok){const y=await i.json();n(y),r.success("Playback settings updated")}else r.error("Failed to update settings")}catch{r.error("Failed to update settings")}finally{l(!1)}}};return x?e.jsxs(u,{title:"Playback Settings",children:[e.jsx(m,{title:"Playback Settings"}),e.jsx("div",{className:"text-muted-foreground",children:"Loading..."})]}):e.jsxs(u,{title:"Playback Settings",children:[e.jsx(m,{title:"Playback Settings"}),e.jsx("div",{className:"space-y-6",children:e.jsxs(S,{children:[e.jsxs(A,{children:[e.jsx(N,{children:"Video Transcoding"}),e.jsx(k,{children:"Configure how videos with incompatible audio codecs (AC3, DTS, TrueHD) are transcoded for browser playback."})]}),e.jsxs(C,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(p,{htmlFor:"hw-accel",children:"Hardware Acceleration"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Use GPU for faster video processing when seeking"})]}),e.jsx(T,{id:"hw-accel",checked:t?.transcoding.useHardwareAcceleration??!1,onCheckedChange:a=>d({useHardwareAcceleration:a}),disabled:c})]}),t?.transcoding.useHardwareAcceleration&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"hw-type",children:"Acceleration Type"}),e.jsxs(j,{value:t?.transcoding.hardwareAccelType??"auto",onValueChange:a=>d({hardwareAccelType:a}),disabled:c,children:[e.jsx(b,{className:"w-64",children:e.jsx(v,{})}),e.jsxs(w,{children:[e.jsx(s,{value:"auto",children:"Auto-detect (Recommended)"}),e.jsx(s,{value:"videotoolbox",children:"VideoToolbox (macOS)"}),e.jsx(s,{value:"cuda",children:"CUDA (NVIDIA)"}),e.jsx(s,{value:"qsv",children:"Quick Sync (Intel)"}),e.jsx(s,{value:"vaapi",children:"VAAPI (Linux)"}),e.jsx(s,{value:"none",children:"None (CPU only)"})]})]}),e.jsxs("div",{className:"pt-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Detected hardware acceleration:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t?.availableHardwareAccel.length===0?e.jsx(h,{variant:"outline",className:"text-muted-foreground",children:"None available"}):t?.availableHardwareAccel.map(a=>e.jsx(h,{variant:"secondary",children:P[a]||a},a))})]})]}),e.jsxs("div",{className:"rounded-lg border bg-muted/50 p-4 mt-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:"About Transcoding"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Video transcoding is only used when the source file has audio codecs that browsers cannot play natively (such as AC3, DTS, or TrueHD commonly found in Blu-ray rips). The video stream is copied without re-encoding, only the audio is transcoded to AAC."}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:[e.jsx("strong",{children:"Hardware acceleration"})," can speed up seeking in large files (like 4K HEVC content) by using your GPU for video demuxing. Note: This is experimental and may cause playback issues with some files."]})]})]})]})})]})}H.__docgenInfo={description:"",methods:[],displayName:"PlaybackSettingsPage"};export{H as default};
