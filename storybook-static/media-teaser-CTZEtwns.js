import{j as e}from"./jsx-runtime-u17CrQMm.js";import{H as _,j as F,I as P}from"./index.min-fvaCWwiU.js";import{B as R}from"./badge-B6bn15vN.js";import{a5 as B}from"./media-status-badge-DETbNkVM.js";import{r as i}from"./app-BHuVDAkc.js";function h({fadeOut:x=!1}={}){const p=[0,.35,.12,.5,.22,.42],o=[];for(let t=0;t<6;t++)for(let n=0;n<8;n++){const s=p[t]+n/8*1*.6;o.push(e.jsx("rect",{x:t*2.5+.5,y:n*2.5+.5,width:2,height:2,rx:.3,fill:"#00ff41",opacity:.1,children:e.jsx("animate",{attributeName:"opacity",values:"0.08;0.9;0.35;0.08",keyTimes:"0;0.2;0.5;1",dur:"1s",begin:`${s}s`,repeatCount:"indefinite"})},`${t}-${n}`))}const d=6*2.5+.5,a=8*2.5+.5;return e.jsx("div",{className:`h-5 w-5 rounded-sm bg-black/70 ring-1 ring-black/40 shadow-sm flex items-center justify-center overflow-hidden ${x?"streaming-fade-out":"streaming-fade-in"}`,children:e.jsx("svg",{width:d,height:a,viewBox:`0 0 ${d} ${a}`,className:"drop-shadow-[0_0_2px_#00ff41]",children:o})})}function D({tmdbId:x,title:c,year:m,posterUrl:u,genres:l,mediaType:v,status:y,isToggling:p=!1,showStatusOnHover:o=!1,onToggleRequest:d,streamingProviders:a,isLoadingProviders:t=!1,onClick:n,size:s="grid",observerRef:N}){const[S,q]=i.useState(!1),I=u&&!S,k=i.useCallback(()=>{q(!0)},[]),f=i.useRef(!1),[$,g]=i.useState(!1),[C,w]=i.useState(!1);i.useEffect(()=>{if(t)f.current=!0,g(!1),w(!1);else if(f.current){f.current=!1,g(!0);const r=setTimeout(()=>{g(!1),a&&a.length>0&&w(!0)},250);return()=>clearTimeout(r)}},[t,a]);const E=v==="movie"?F:P,H=s==="lane"?"w-[150px]":s==="small"?"w-32":"",z=s==="small"?"h-8 w-8":"h-12 w-12",L=s==="small"?"text-xs":"text-sm",M=s==="small"?"text-[10px]":"text-xs",b=3,j=a?.slice(0,b)??[],T=(a?.length??0)-b;return e.jsx("div",{ref:N,className:`group cursor-pointer ${s==="lane"||s==="small"?`flex-shrink-0 ${H}`:""}`,onClick:n,children:e.jsxs("div",{className:"relative aspect-[2/3] rounded-lg overflow-hidden bg-muted",children:[I?e.jsx("img",{src:u,alt:c,className:"w-full h-full object-cover transition-transform group-hover:scale-105",onError:k}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(_,{icon:E,className:`${z} text-muted-foreground/30`})}),l&&l.length>0&&e.jsx(R,{className:"absolute top-2 left-2 text-[10px] px-1.5 py-0.5 bg-black/40 backdrop-blur-sm text-white/90 border-0",variant:"secondary",children:l[0].toUpperCase()}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none"}),e.jsx("div",{className:"absolute top-2 right-2 z-10",onClick:r=>r.stopPropagation(),children:e.jsx(B,{status:y,size:"tiny",showOnHover:o,isToggling:p,onToggleRequest:d})}),$?e.jsx("div",{className:"absolute bottom-2 left-2 z-10",children:e.jsx(h,{fadeOut:!0})}):j.length>0?e.jsxs("div",{className:`absolute bottom-2 left-2 flex items-center -space-x-1 z-10 ${C?"streaming-fade-in":""}`,children:[j.map(r=>e.jsx("img",{src:r.logoUrl,alt:r.name,title:r.name,className:"h-5 w-5 rounded-sm ring-1 ring-black/40 shadow-sm"},r.id)),T>0&&e.jsxs("span",{className:"text-[9px] font-medium text-white bg-black/50 rounded-sm px-1 py-0.5 ring-1 ring-black/40 ml-0.5",children:["+",T]})]}):t?e.jsx("div",{className:"absolute bottom-2 left-2 z-10",children:e.jsx(h,{})}):null,e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("p",{className:`text-white ${L} font-medium line-clamp-2`,children:c}),m?e.jsx("p",{className:`text-white/70 ${M}`,children:m}):null]})]})})}h.__docgenInfo={description:"",methods:[],displayName:"StreamingProviderLoader"};D.__docgenInfo={description:"",methods:[],displayName:"MediaTeaser",props:{tmdbId:{required:!0,tsType:{name:"string"},description:""},title:{required:!0,tsType:{name:"string"},description:""},year:{required:!1,tsType:{name:"number"},description:""},posterUrl:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},genres:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},mediaType:{required:!0,tsType:{name:"union",raw:"'movie' | 'tv'",elements:[{name:"literal",value:"'movie'"},{name:"literal",value:"'tv'"}]},description:""},status:{required:!0,tsType:{name:"MediaItemStatus"},description:""},isToggling:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},showStatusOnHover:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onToggleRequest:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},streamingProviders:{required:!1,tsType:{name:"Array",elements:[{name:"StreamingProviderInfo"}],raw:"StreamingProviderInfo[]"},description:""},isLoadingProviders:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onClick:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},size:{required:!1,tsType:{name:"union",raw:"'grid' | 'lane' | 'small'",elements:[{name:"literal",value:"'grid'"},{name:"literal",value:"'lane'"},{name:"literal",value:"'small'"}]},description:"",defaultValue:{value:"'grid'",computed:!1}},observerRef:{required:!1,tsType:{name:"signature",type:"function",raw:"(el: HTMLDivElement | null) => void",signature:{arguments:[{type:{name:"union",raw:"HTMLDivElement | null",elements:[{name:"HTMLDivElement"},{name:"null"}]},name:"el"}],return:{name:"void"}}},description:""}}};export{D as M,h as S};
