import{r}from"./app-BHuVDAkc.js";import{u as y,i as T,e as O,z as L}from"./useBaseUiId-BvJSLVy2.js";import{f as E,a as C,m as U,e as D,N as m,E as I}from"./useRenderElement-D0Q1kVud.js";import{r as B}from"./index-D5-0xbEa.js";function A({controlled:e,default:t,name:a,state:s="value"}){const{current:i}=r.useRef(e!==void 0),[o,u]=r.useState(t),d=i?e:o,b=r.useCallback(f=>{i||u(f)},[]);return[d,b]}let h=(function(e){return e.disabled="data-disabled",e.valid="data-valid",e.invalid="data-invalid",e.touched="data-touched",e.dirty="data-dirty",e.filled="data-filled",e.focused="data-focused",e})({});const K={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valid:null,valueMissing:!1},ee={valid(e){return e===null?null:e?{[h.valid]:""}:{[h.invalid]:""}}},S=r.createContext(void 0);function N(e=!1){const t=r.useContext(S);if(t===void 0&&!e)throw new Error(E(16));return t}function F(e){const{focusableWhenDisabled:t,disabled:a,composite:s=!1,tabIndex:i=0,isNativeButton:o}=e,u=s&&t!==!1,d=s&&t===!1;return{props:r.useMemo(()=>{const f={onKeyDown(p){a&&t&&p.key!=="Tab"&&p.preventDefault()}};return s||(f.tabIndex=i,!o&&a&&(f.tabIndex=t?i:-1)),(o&&(t||u)||!o&&a)&&(f["aria-disabled"]=a),o&&(!t||d)&&(f.disabled=a),f},[s,a,t,u,d,o,i])}}function te(e={}){const{disabled:t=!1,focusableWhenDisabled:a,tabIndex:s=0,native:i=!0}=e,o=r.useRef(null),u=N(!0)!==void 0,d=y(()=>{const l=o.current;return!!(l?.tagName==="A"&&l?.href)}),{props:b}=F({focusableWhenDisabled:a,disabled:t,composite:u,tabIndex:s,isNativeButton:i}),f=r.useCallback(()=>{const l=o.current;W(l)&&u&&t&&b.disabled===void 0&&l.disabled&&(l.disabled=!1)},[t,b.disabled,u]);C(f,[f]);const p=r.useCallback((l={})=>{const{onClick:c,onMouseDown:v,onKeyUp:V,onKeyDown:R,onPointerDown:k,...w}=l;return U({type:i?"button":void 0,onClick(n){if(t){n.preventDefault();return}c?.(n)},onMouseDown(n){t||v?.(n)},onKeyDown(n){if(t||(D(n),R?.(n)),n.baseUIHandlerPrevented)return;const P=n.target===n.currentTarget&&!i&&!d()&&!t,g=n.key==="Enter",M=n.key===" ";P&&((M||g)&&n.preventDefault(),g&&c?.(n))},onKeyUp(n){t||(D(n),V?.(n)),!n.baseUIHandlerPrevented&&n.target===n.currentTarget&&!i&&!t&&n.key===" "&&c?.(n)},onPointerDown(n){if(t){n.preventDefault();return}k?.(n)}},i?void 0:{role:"button"},b,w)},[t,b,i,d]),x=y(l=>{o.current=l,f()});return{getButtonProps:p,buttonRef:x}}function W(e){return T(e)&&e.tagName==="BUTTON"}const H=r.createContext({invalid:void 0,name:void 0,validityData:{state:K,errors:[],error:"",value:"",initialValue:null},setValidityData:m,disabled:void 0,touched:!1,setTouched:m,dirty:!1,setDirty:m,filled:!1,setFilled:m,focused:!1,setFocused:m,validate:()=>null,validationMode:"onSubmit",validationDebounceTime:0,shouldValidateOnChange:()=>!1,state:{disabled:!1,valid:null,touched:!1,dirty:!1,filled:!1,focused:!1},markedDirtyRef:{current:!1},validation:{getValidationProps:(e=I)=>e,getInputValidationProps:(e=I)=>e,inputRef:{current:null},commit:async()=>{}}});function _(e=!0){const t=r.useContext(H);if(t.setValidityData===m&&!e)throw new Error(E(28));return t}function Y(e,t){return{...e,state:{...e.state,valid:!t&&e.state.valid}}}const z=r.createContext({formRef:{current:{fields:new Map}},errors:{},clearErrors:m,validationMode:"onSubmit",submitAttemptedRef:{current:!1}});function J(){return r.useContext(z)}function ne(e){const{enabled:t=!0,value:a,id:s,name:i,controlRef:o,commit:u}=e,{formRef:d}=J(),{invalid:b,markedDirtyRef:f,validityData:p,setValidityData:x}=_(),l=y(e.getValue);C(()=>{if(!t)return;let c=a;c===void 0&&(c=l()),p.initialValue===null&&c!==null&&x(v=>({...v,initialValue:c}))},[t,x,a,p.initialValue,l]),C(()=>{!t||!s||d.current.fields.set(s,{getValue:l,name:i,controlRef:o,validityData:Y(p,b),validate(){let c=a;c===void 0&&(c=l()),f.current=!0,B.flushSync(()=>u(c))}})},[u,o,t,d,l,s,b,f,i,p,a]),C(()=>{const c=d.current.fields;return()=>{s&&c.delete(s)}},[d,s])}const j=r.createContext({controlId:void 0,setControlId:m,labelId:void 0,setLabelId:m,messageIds:[],setMessageIds:m,getDescriptionProps:e=>e});function q(){return r.useContext(j)}function ae(e,t){const a=r.useRef(e),s=y(t);C(()=>{a.current!==e&&s(a.current)},[e,s]),C(()=>{a.current=e},[e])}function oe(e={}){const{id:t,implicit:a=!1,controlRef:s}=e,{controlId:i,setControlId:o}=q(),u=O(t);return C(()=>{if(!(!a&&!t||o===m)){if(a){const d=s?.current;L(d)&&d.closest("label")!=null?o(t??null):o(i??u)}else t&&o(t);return()=>{t&&o(void 0)}}},[t,s,i,o,a,u]),i??u}export{S as C,_ as a,q as b,te as c,A as d,ne as e,ee as f,ae as g,oe as h,N as i,J as u};
