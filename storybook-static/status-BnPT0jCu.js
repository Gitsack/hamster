import{j as s}from"./jsx-runtime-u17CrQMm.js";import{t as y,H as b}from"./app-CFoDCqX-.js";import{A as S}from"./app-layout-CTvh2ZE0.js";import{B as C}from"./button-B9kPMW4q.js";import{B as m}from"./badge-B6bn15vN.js";import{C as x,a as h,d as u,b as v}from"./card-BT9UEfea.js";import{S as l}from"./skeleton-A7behTLO.js";import{H as d,u as H,V as $,ae as B,k as I}from"./index.min-fvaCWwiU.js";import{r as i}from"./app-BHuVDAkc.js";import"./preload-helper-PPVm8Dsz.js";import"./client-Bx265bNG.js";import"./index-CYxWbFTv.js";import"./index-D5-0xbEa.js";import"./utils-CDN07tui.js";import"./dialog-CQTA4pg1.js";import"./createLucideIcon-GXN1tXoc.js";import"./spinner-McTJFRVv.js";import"./media-status-badge-DETbNkVM.js";import"./useRenderElement-D0Q1kVud.js";import"./useBaseUiId-BvJSLVy2.js";import"./useValueAsRef-GoV-SdOe.js";import"./media-teaser-CTZEtwns.js";import"./check-BEKQ83Eb.js";import"./useLabelableId-CyGgmgle.js";import"./valueToPercent-CmxdyyhM.js";import"./slot-CUYGZ4Fv.js";import"./hamster-icon-DOXrnfMg.js";import"./input-Bw95PIWX.js";const M={database:"Database",rootFolders:"Root Folders",indexers:"Indexers",downloadClients:"Download Clients"};function R(t){const n=Math.floor(t/86400),e=Math.floor(t%86400/3600),o=Math.floor(t%3600/60),r=[];return n>0&&r.push(`${n}d`),e>0&&r.push(`${e}h`),o>0&&r.push(`${o}m`),r.length===0&&r.push(`${t}s`),r.join(" ")}function E({status:t}){switch(t){case"ok":return s.jsx(d,{icon:I,className:"h-5 w-5 text-green-500"});case"warning":return s.jsx(d,{icon:B,className:"h-5 w-5 text-yellow-500"});case"error":return s.jsx(d,{icon:$,className:"h-5 w-5 text-red-500"})}}function L({status:t}){switch(t){case"ok":return s.jsx(m,{className:"bg-green-500",children:"Healthy"});case"warning":return s.jsx(m,{className:"bg-yellow-500 text-black",children:"Warning"});case"error":return s.jsx(m,{className:"bg-red-500",children:"Error"})}}function k(){const[t,n]=i.useState(null),[e,o]=i.useState(null),[r,f]=i.useState(!0),[j,p]=i.useState(!1),c=i.useCallback(async(a=!0)=>{a&&f(!0);try{const[N,g]=await Promise.all([fetch("/health"),fetch("/api/v1/system/info")]);N.ok&&n(await N.json()),g.ok&&o(await g.json())}catch{y.error("Failed to fetch system status")}finally{f(!1)}},[]);i.useEffect(()=>{c()},[c]);const w=async()=>{p(!0),await c(!1),p(!1),y.success("Status refreshed")};return s.jsxs(S,{title:"System Status",actions:s.jsxs(C,{onClick:w,disabled:j,children:[s.jsx(d,{icon:H,className:`h-4 w-4 mr-2 ${j?"animate-spin":""}`}),"Refresh"]}),children:[s.jsx(b,{title:"System Status"}),s.jsx("div",{className:"space-y-6",children:r?s.jsxs(x,{children:[s.jsx(h,{children:s.jsx(l,{className:"h-6 w-32"})}),s.jsxs(u,{className:"space-y-4",children:[s.jsx(l,{className:"h-4 w-48"}),s.jsx(l,{className:"h-4 w-64"}),s.jsx(l,{className:"h-4 w-40"})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs(x,{children:[s.jsx(h,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(v,{children:"System Information"}),t&&s.jsx(L,{status:t.status})]})}),s.jsxs(u,{children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Version"}),s.jsx("div",{className:"text-sm font-medium",children:e?.version||t?.version||"-"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Node.js"}),s.jsx("div",{className:"text-sm font-medium",children:e?.nodeVersion||"-"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Platform"}),s.jsx("div",{className:"text-sm font-medium",children:e?`${e.platform} (${e.arch})`:"-"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Uptime"}),s.jsx("div",{className:"text-sm font-medium",children:e?R(e.uptime):"-"})]})]}),e&&s.jsxs("div",{className:"mt-4 pt-4 border-t",children:[s.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:"Memory Usage"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex-1 bg-muted rounded-full h-2.5",children:s.jsx("div",{className:"bg-primary rounded-full h-2.5 transition-all",style:{width:`${Math.min(e.memory.used/e.memory.total*100,100)}%`}})}),s.jsxs("span",{className:"text-sm font-medium whitespace-nowrap",children:[e.memory.used," / ",e.memory.total," MB"]})]})]})]})]}),s.jsxs(x,{children:[s.jsx(h,{children:s.jsx(v,{children:"Health Checks"})}),s.jsx(u,{children:t?s.jsx("div",{className:"space-y-3",children:t.checks.map(a=>s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md border",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(E,{status:a.status}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium",children:M[a.name]||a.name}),a.message&&s.jsx("div",{className:"text-xs text-muted-foreground",children:a.message})]})]}),s.jsx(m,{variant:"outline",className:a.status==="ok"?"border-green-500 text-green-500":a.status==="warning"?"border-yellow-500 text-yellow-500":"border-red-500 text-red-500",children:a.status})]},a.name))}):s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:s.jsx("p",{children:"Unable to fetch health status."})})})]})]})})]})}k.__docgenInfo={description:"",methods:[],displayName:"SystemStatus"};export{k as default};
